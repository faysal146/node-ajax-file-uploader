parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"K0yk":[function(require,module,exports) {
"use strict";function e(e){switch(!0){case/^image.+/g.test(e):return"image";case"application/pdf"===e:return"pdf";case"video/mp4"===e:return"video";case"application/x-zip-compressed"===e:return"zip";default:return"text"}}function t(e){var t=Math.floor(e/6e4),r=(e%6e4/1e3).toFixed(0);return"".concat(t," min ").concat(r<10?"0":"").concat(r," sec")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.vaildType=e,exports.converMillsecond=t;
},{}],"udL9":[function(require,module,exports) {
module.exports="/image-icon.0699f491.svg";
},{}],"D4CJ":[function(require,module,exports) {
module.exports="/pdf-icon.bddaba1e.svg";
},{}],"gJcX":[function(require,module,exports) {
module.exports="/video-icon.8098ebcc.svg";
},{}],"bYy9":[function(require,module,exports) {
module.exports="/text-icon.1dd7c9e7.svg";
},{}],"lL3g":[function(require,module,exports) {
module.exports="/cancle-icon.ad5020bf.svg";
},{}],"MtkK":[function(require,module,exports) {
module.exports="/complete-icon.bf9f7afb.svg";
},{}],"KCLy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.uploadFileItem=s,exports.fillItemErrorAlert=l,exports.progessBar=d,exports.uploadCounter=u,exports.onCancleButtonClick=v,exports.uploadComplete=m,exports.showError=f,exports.cancleUpload=p,exports.duplicatFileAlert=g,exports.removeDuplicatFileAlert=b;var e=i(require("../icons/image-icon.svg")),n=i(require("../icons/pdf-icon.svg")),t=i(require("../icons/video-icon.svg")),c=i(require("../icons/text-icon.svg")),a=i(require("../icons/cancle-icon.svg")),o=i(require("../icons/complete-icon.svg"));function i(e){return e&&e.__esModule?e:{default:e}}var r={image:e.default,pdf:n.default,video:t.default,text:c.default,cancle:a.default,complete:o.default};function s(e,n){var t=e.name,c=e.type;return'\n        <div class="uploader__file-item" data-name="'.concat(t.trim(),'">\n            <div class="file-info">\n                <div class="file-icon">\n                <img src="').concat(r[c],'" alt="video icon" />\n                </div>\n                <div class="file-name">').concat(t.length>20?t.substr(0,18)+"...":t,'</div>\n            </div>\n            <div class="uploader__file--progress">\n                <div class="progess-bar">\n                <div class="bar"></div>\n                </div>\n                <div class="progess-status">\n                <span class="time-left">\n                    0 min 0 sec\n                </span>\n                <span class="uploaded">\n                  0%\n                </span>\n                </div>\n            </div>\n            <div class="uploader__file--control">\n                <button class="cancle-button">\n                  <img src="').concat(r.cancle,'" alt="" srcset="" />\n                </button>\n            </div>\n        </div>\n    ')}function l(e){var n=e.name,t=e.type;return'\n      <div class="alert" data-name="'.concat(n.trim(),'">\n         <div class="file-icon">\n            <img src="').concat(r[t],'" alt="video icon" />\n         </div>\n         <div class="file-name">\n            ').concat(n.length>10?"".concat(n.substr(0,10),".."):n,'\n         </div>\n         <button class="cancle-button">\n            <img src="').concat(r.cancle,'" alt="" srcset="" />\n         </button>\n      </div>\n   ')}function d(e,n){document.querySelector('[data-name="'.concat(e,'"] .bar')).style.width="".concat(n,"%"),document.querySelector('[data-name="'.concat(e,'"] .uploaded')).innerHTML="".concat(n,"%")}function u(e,n){document.querySelector('[data-name="'.concat(e,'"] .time-left')).innerHTML="".concat(n)}function v(e,n){var t=document.querySelector('[data-name="'.concat(e,'"] .cancle-button')),c=t.addEventListener("click",function(){t.removeEventListener("click",c),n()})}function m(e){document.querySelector('[data-name="'.concat(e,'"] .uploader__file--control')).innerHTML='\n             <div class="complete">\n                <img src=\''.concat(r.complete,"' alt='' srcset='' />\n             </div>\n          ")}function f(e){var n=document.querySelector(".server-error-alert");n.classList.add("show-alert"),n.innerHTML=e,setTimeout(function(){n.innerHTML="",n.classList.remove("show-alert")},4e3)}function p(e){var n=document.querySelector('[data-name="'.concat(e,'"]'));n.classList.add("remove-file"),setTimeout(function(){return n.remove()},500)}function g(e){var n=e.name,t=e.type;return'\n      <div class="alert" data-name="'.concat(n.trim(),'">\n         <div class="file-icon">\n            <img src="').concat(r[t],'" alt="video icon" />\n         </div>\n         <div class="file-name">\n            ').concat(n.length>10?"".concat(n.substr(0,10),".."):n,'\n         </div>\n         <button class="cancle-button">\n            <img src="').concat(r.cancle,'" alt="" srcset="" />\n         </button>\n      </div>\n   ')}function b(e){document.querySelectorAll(".alert").forEach(function(n){e&&e===n.dataset.name&&n.remove();var t=n.addEventListener("click",function(e){n.removeEventListener("click",t),n.classList.add("remove-file"),setTimeout(function(){return n.remove()},300)})})}
},{"../icons/image-icon.svg":"udL9","../icons/pdf-icon.svg":"D4CJ","../icons/video-icon.svg":"gJcX","../icons/text-icon.svg":"bYy9","../icons/cancle-icon.svg":"lL3g","../icons/complete-icon.svg":"MtkK"}],"MbNn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./utils"),e=require("./views");function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var a=function a(r){var l=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/upload";n(this,a),o(this,"http",function(){if(!l.file.uploaded){var t=new FormData;t.append("file",l.file),l.http=new XMLHttpRequest,l.http.open("POST",l._url),l.http.onloadstart=l._handleLoadStart,l.http.upload.onprogress=l._handleOnProgress,l.http.onload=l._handleOnLoad,l.http.onerror=l._handleError,l.http.onabort=l._handleAbort,l.http.send(t)}}),o(this,"_handleLoadStart",function(){l.file.uploading=!0;(0,e.onCancleButtonClick)(l.file.name,function(){return l.http.abort()})}),o(this,"_handleOnProgress",function(n){var o=l.file.name,a=n.total-n.loaded,r=Date.now()-l._now,i=a/n.loaded*r,d=Math.round(100*n.loaded/n.total);(0,e.progessBar)(o,d),(0,e.uploadCounter)(o,(0,t.converMillsecond)(i))}),o(this,"_handleAbort",function(){(0,e.cancleUpload)(l.file.name)}),o(this,"_handleOnLoad",function(){200===l.http.status?((0,e.uploadComplete)(l.file.name),l.file.uploaded=!0,l.file.uploading=!1):l.http.onerror("some things went wrong")}),o(this,"_handleError",function(){(0,e.showError)("something went wrong")}),this._url=i,this.file=r,this._now=Date.now()};o(a,"httpUpload",function(t,e){return new a(t,e).http()});var r=a.httpUpload;exports.default=r;
},{"./utils":"K0yk","./views":"KCLy"}],"gIeR":[function(require,module,exports) {
module.exports={port:2e3,server_path:"/upload"};
},{}],"vZyd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("./http")),t=require("./views"),r=require("./utils"),n=require("../../constants");function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach(function(t){o(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}var f=function(){function i(e,t){s(this,i),this.fileItemContainerEl=e,this.alertContainerEl=t,this.state={files:{},error:{}},this.onFileInput=this.onFileInput.bind(this)}return c(i,[{key:"fileAlreadyUploaded",value:function(e){var t=this;return 0===Object.keys(this.state.files).length?this.state=Object.values(e).reduce(function(e,t){return e.files[t.name]=t,e.error={},e},l({},this.state)):this.state=Object.values(e).reduce(function(e,r){return r.name in t.state.files&&t.state.files[r.name].size===r.size?e.error[r.name]=r:e.files[r.name]=r,e},l({},this.state)),this}},{key:"onFileInput",value:function(t){this.fileAlreadyUploaded(t).renderUploadFile(this.fileItemContainerEl).handleUploadFile(e.default).renderDuplicatFileAlert(this.alertContainerEl)}},{key:"handleUploadFile",value:function(e){return Object.values(this.state.files).forEach(function(t){t.uploaded||t.uploading||e(t,n.server_path)}),this}},{key:"renderUploadFile",value:function(e){return Object.values(this.state.files).forEach(function(n){n.rendered||(e.insertAdjacentHTML("beforeend",(0,t.uploadFileItem)({name:n.name,type:(0,r.vaildType)(n.type)})),n.rendered=!0)}),this}},{key:"removeFileError",value:function(e){var t=this,r={};e||(this.state.error={}),Object.keys(this.state.error).forEach(function(n){e!==n&&(r[n]=t.state.error[n])}),this.state.error=r}},{key:"renderDuplicatFileAlert",value:function(e){var n=this,i=Object.values(this.state.error);i.length<1||(i.forEach(function(i){e.insertAdjacentHTML("beforeend",(0,t.duplicatFileAlert)({name:i.name,type:(0,r.vaildType)(i.type)})),setTimeout(function(){(0,t.removeDuplicatFileAlert)(i.name),n.removeFileError(i.name)},5e3)}),(0,t.removeDuplicatFileAlert)(),this.removeFileError())}}]),i}(),p=f;exports.default=p;
},{"./http":"MbNn","./views":"KCLy","./utils":"K0yk","../../constants":"gIeR"}],"H99C":[function(require,module,exports) {
"use strict";var e=t(require("./app"));function t(e){return e&&e.__esModule?e:{default:e}}var n=document.querySelector(".uploader__file"),i=document.querySelector(".alert-container"),r=document.querySelector("#file-input"),a=document.querySelector("#file-upload"),o=new e.default(n,i);r.addEventListener("input",function(e){o.onFileInput(e.target.files)}),a.addEventListener("drop",function(e){o.onFileInput(e.dataTransfer.files)});var c=["dragenter","dragover"],u=["dragleave","drop"];[].concat(u,c).forEach(function(e){a.addEventListener(e,function(e){e.preventDefault(),e.stopPropagation()})}),u.forEach(function(e){a.addEventListener(e,function(){a.classList.contains("highlight")&&a.classList.remove("highlight")},!1)}),c.forEach(function(e){a.addEventListener(e,function(){a.classList.contains("highlight")||a.classList.add("highlight")},!1)});
},{"./app":"vZyd"}]},{},["H99C"], null)
//# sourceMappingURL=/src.edf9e614.js.map